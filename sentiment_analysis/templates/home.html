<!-- https://semantic-ui.com/introduction/getting-started.html -->
{% extends "layout.html" %}

{% block content %}
<script>
    $(document).ready(function () {
        // $("#predict_phrase").click(function () {
        //     $('.ui.modal').modal('show');
        // });    
        var delayInMilliseconds = 500;
        $("#predict_phrase").click(function () {
            var input_phrase = $("#input_phrase").val();
            console.log(input_phrase)
            $.ajax({
                url: '/phrase',
                type: 'POST',
                contentType: 'application/json',
                data: JSON.stringify({ "phrase": input_phrase }), // ??????
                dataType: 'json'
            });
        });
        $("#predict_phrase").click(function () {
            setTimeout(function () {
                location.href = "/";
            }, delayInMilliseconds);
        });
    });
</script>

<div class="ui hidden divider"></div>
<div class="ui hidden divider"></div>

<div class="ui items">
    <div class="item">

        <div class="middle aligned content">
            <div class="field">
                <textarea id="input_phrase" placeholder="Start typing here..."></textarea>
            </div>
        </div>
        <div class="middle aligned content">
            <div class="header">Write a message to test it's sentiment...</div>
            <div class="ui clearing divider"></div>
            <div class="meta">
                <span>A real-time sentiment analysis application.
                </span>
            </div>
            <div class="ui hidden divider"></div>
            <div class="extra">
                <button id="predict_phrase" class="ui primary button">
                    Predict
                </button>
                <button id="clear" class="ui button">
                    Clear
                </button>
            </div>
        </div>
    </div>

</div>

<div class="ui hidden divider"></div>
<div class="ui hidden divider"></div>


<table class="ui celled structured table">
    <thead>
        <tr>
            <th rowspan="2">Phrase</th>
            <th rowspan="2">Confidence</th>
            <th rowspan="2">Sentiment</th>
            <th colspan="3">Probabilities</th>
        </tr>

        <tr>
            <th>Positive</th>
            <th>Negative</th>
            <th>Neutral</th>
        </tr>
    </thead>

    <tbody>
        {% for phrase in phrases %}
        <tr>
            <td>{{ phrase.phrase }}</td>
            <td>{{ phrase.confidence }}</td>
            <td>{{ phrase.sentiment }}</td>

            <td>{{ phrase.positive }}</td>
            <td>{{ phrase.negative }}</td>
            <td>{{ phrase.neutral }}</td>
        </tr>
        {% endfor %}
    </tbody>

</table>


{% endblock %}